var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ct(o){if(o.__esModule)return o;var n=o.default;if(typeof n=="function"){var i=function e(){if(this instanceof e){var s=[null];s.push.apply(s,arguments);var a=Function.bind.apply(n,s);return new a}return n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(o).forEach(function(e){var s=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(i,e,s.get?s:{enumerable:!0,get:function(){return o[e]}})}),i}var K={},_e={};_e.byteLength=Dt;_e.toByteArray=It;_e.fromByteArray=Pt;var ie=[],z=[],Tt=typeof Uint8Array<"u"?Uint8Array:Array,be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ce=0,_t=be.length;ce<_t;++ce)ie[ce]=be[ce],z[be.charCodeAt(ce)]=ce;z["-".charCodeAt(0)]=62;z["_".charCodeAt(0)]=63;function lt(o){var n=o.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=o.indexOf("=");i===-1&&(i=n);var e=i===n?0:4-i%4;return[i,e]}function Dt(o){var n=lt(o),i=n[0],e=n[1];return(i+e)*3/4-e}function xt(o,n,i){return(n+i)*3/4-i}function It(o){var n,i=lt(o),e=i[0],s=i[1],a=new Tt(xt(o,e,s)),f=0,u=s>0?e-4:e,l;for(l=0;l<u;l+=4)n=z[o.charCodeAt(l)]<<18|z[o.charCodeAt(l+1)]<<12|z[o.charCodeAt(l+2)]<<6|z[o.charCodeAt(l+3)],a[f++]=n>>16&255,a[f++]=n>>8&255,a[f++]=n&255;return s===2&&(n=z[o.charCodeAt(l)]<<2|z[o.charCodeAt(l+1)]>>4,a[f++]=n&255),s===1&&(n=z[o.charCodeAt(l)]<<10|z[o.charCodeAt(l+1)]<<4|z[o.charCodeAt(l+2)]>>2,a[f++]=n>>8&255,a[f++]=n&255),a}function Ft(o){return ie[o>>18&63]+ie[o>>12&63]+ie[o>>6&63]+ie[o&63]}function Rt(o,n,i){for(var e,s=[],a=n;a<i;a+=3)e=(o[a]<<16&16711680)+(o[a+1]<<8&65280)+(o[a+2]&255),s.push(Ft(e));return s.join("")}function Pt(o){for(var n,i=o.length,e=i%3,s=[],a=16383,f=0,u=i-e;f<u;f+=a)s.push(Rt(o,f,f+a>u?u:f+a));return e===1?(n=o[i-1],s.push(ie[n>>2]+ie[n<<4&63]+"==")):e===2&&(n=(o[i-2]<<8)+o[i-1],s.push(ie[n>>10]+ie[n>>4&63]+ie[n<<2&63]+"=")),s.join("")}var je={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */je.read=function(o,n,i,e,s){var a,f,u=s*8-e-1,l=(1<<u)-1,g=l>>1,p=-7,v=i?s-1:0,w=i?-1:1,E=o[n+v];for(v+=w,a=E&(1<<-p)-1,E>>=-p,p+=u;p>0;a=a*256+o[n+v],v+=w,p-=8);for(f=a&(1<<-p)-1,a>>=-p,p+=e;p>0;f=f*256+o[n+v],v+=w,p-=8);if(a===0)a=1-g;else{if(a===l)return f?NaN:(E?-1:1)*(1/0);f=f+Math.pow(2,e),a=a-g}return(E?-1:1)*f*Math.pow(2,a-e)};je.write=function(o,n,i,e,s,a){var f,u,l,g=a*8-s-1,p=(1<<g)-1,v=p>>1,w=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=e?0:a-1,I=e?1:-1,x=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(u=isNaN(n)?1:0,f=p):(f=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-f))<1&&(f--,l*=2),f+v>=1?n+=w/l:n+=w*Math.pow(2,1-v),n*l>=2&&(f++,l/=2),f+v>=p?(u=0,f=p):f+v>=1?(u=(n*l-1)*Math.pow(2,s),f=f+v):(u=n*Math.pow(2,v-1)*Math.pow(2,s),f=0));s>=8;o[i+E]=u&255,E+=I,u/=256,s-=8);for(f=f<<s|u,g+=s;g>0;o[i+E]=f&255,E+=I,f/=256,g-=8);o[i+E-I]|=x*128};var Bt={}.toString,bt=Array.isArray||function(o){return Bt.call(o)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */(function(o){var n=_e,i=je,e=bt;o.Buffer=u,o.SlowBuffer=B,o.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=Ue.TYPED_ARRAY_SUPPORT!==void 0?Ue.TYPED_ARRAY_SUPPORT:s(),o.kMaxLength=a();function s(){try{var h=new Uint8Array(1);return h.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},h.foo()===42&&typeof h.subarray=="function"&&h.subarray(1,1).byteLength===0}catch{return!1}}function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(h,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(h=new Uint8Array(t),h.__proto__=u.prototype):(h===null&&(h=new u(t)),h.length=t),h}function u(h,t,r){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(h,t,r);if(typeof h=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return v(this,h)}return l(this,h,t,r)}u.poolSize=8192,u._augment=function(h){return h.__proto__=u.prototype,h};function l(h,t,r,c){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?I(h,t,r,c):typeof t=="string"?w(h,t,r):x(h,t)}u.from=function(h,t,r){return l(null,h,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}));function g(h){if(typeof h!="number")throw new TypeError('"size" argument must be a number');if(h<0)throw new RangeError('"size" argument must not be negative')}function p(h,t,r,c){return g(t),t<=0?f(h,t):r!==void 0?typeof c=="string"?f(h,t).fill(r,c):f(h,t).fill(r):f(h,t)}u.alloc=function(h,t,r){return p(null,h,t,r)};function v(h,t){if(g(t),h=f(h,t<0?0:b(t)|0),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)h[r]=0;return h}u.allocUnsafe=function(h){return v(null,h)},u.allocUnsafeSlow=function(h){return v(null,h)};function w(h,t,r){if((typeof r!="string"||r==="")&&(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var c=j(t,r)|0;h=f(h,c);var d=h.write(t,r);return d!==c&&(h=h.slice(0,d)),h}function E(h,t){var r=t.length<0?0:b(t.length)|0;h=f(h,r);for(var c=0;c<r;c+=1)h[c]=t[c]&255;return h}function I(h,t,r,c){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(c||0))throw new RangeError("'length' is out of bounds");return r===void 0&&c===void 0?t=new Uint8Array(t):c===void 0?t=new Uint8Array(t,r):t=new Uint8Array(t,r,c),u.TYPED_ARRAY_SUPPORT?(h=t,h.__proto__=u.prototype):h=E(h,t),h}function x(h,t){if(u.isBuffer(t)){var r=b(t.length)|0;return h=f(h,r),h.length===0||t.copy(h,0,0,r),h}if(t){if(typeof ArrayBuffer<"u"&&t.buffer instanceof ArrayBuffer||"length"in t)return typeof t.length!="number"||Et(t.length)?f(h,0):E(h,t);if(t.type==="Buffer"&&e(t.data))return E(h,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function b(h){if(h>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return h|0}function B(h){return+h!=h&&(h=0),u.alloc(+h)}u.isBuffer=function(t){return!!(t!=null&&t._isBuffer)},u.compare=function(t,r){if(!u.isBuffer(t)||!u.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var c=t.length,d=r.length,m=0,S=Math.min(c,d);m<S;++m)if(t[m]!==r[m]){c=t[m],d=r[m];break}return c<d?-1:d<c?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,r){if(!e(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return u.alloc(0);var c;if(r===void 0)for(r=0,c=0;c<t.length;++c)r+=t[c].length;var d=u.allocUnsafe(r),m=0;for(c=0;c<t.length;++c){var S=t[c];if(!u.isBuffer(S))throw new TypeError('"list" argument must be an Array of Buffers');S.copy(d,m),m+=S.length}return d};function j(h,t){if(u.isBuffer(h))return h.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(h)||h instanceof ArrayBuffer))return h.byteLength;typeof h!="string"&&(h=""+h);var r=h.length;if(r===0)return 0;for(var c=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return me(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Ze(h).length;default:if(c)return me(h).length;t=(""+t).toLowerCase(),c=!0}}u.byteLength=j;function se(h,t,r){var c=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(h||(h="utf8");;)switch(h){case"hex":return R(this,t,r);case"utf8":case"utf-8":return D(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return ee(this,t,r);case"base64":return _(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,t,r);default:if(c)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),c=!0}}u.prototype._isBuffer=!0;function G(h,t,r){var c=h[t];h[t]=h[r],h[r]=c}u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)G(this,r,r+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)G(this,r,r+3),G(this,r+1,r+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)G(this,r,r+7),G(this,r+1,r+6),G(this,r+2,r+5),G(this,r+3,r+4);return this},u.prototype.toString=function(){var t=this.length|0;return t===0?"":arguments.length===0?D(this,0,t):se.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:u.compare(this,t)===0},u.prototype.inspect=function(){var t="",r=o.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,r,c,d,m){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(r===void 0&&(r=0),c===void 0&&(c=t?t.length:0),d===void 0&&(d=0),m===void 0&&(m=this.length),r<0||c>t.length||d<0||m>this.length)throw new RangeError("out of range index");if(d>=m&&r>=c)return 0;if(d>=m)return-1;if(r>=c)return 1;if(r>>>=0,c>>>=0,d>>>=0,m>>>=0,this===t)return 0;for(var S=m-d,M=c-r,N=Math.min(S,M),V=this.slice(d,m),Y=t.slice(r,c),q=0;q<N;++q)if(V[q]!==Y[q]){S=V[q],M=Y[q];break}return S<M?-1:M<S?1:0};function re(h,t,r,c,d){if(h.length===0)return-1;if(typeof r=="string"?(c=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=d?0:h.length-1),r<0&&(r=h.length+r),r>=h.length){if(d)return-1;r=h.length-1}else if(r<0)if(d)r=0;else return-1;if(typeof t=="string"&&(t=u.from(t,c)),u.isBuffer(t))return t.length===0?-1:ne(h,t,r,c,d);if(typeof t=="number")return t=t&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?d?Uint8Array.prototype.indexOf.call(h,t,r):Uint8Array.prototype.lastIndexOf.call(h,t,r):ne(h,[t],r,c,d);throw new TypeError("val must be string, number or Buffer")}function ne(h,t,r,c,d){var m=1,S=h.length,M=t.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(h.length<2||t.length<2)return-1;m=2,S/=2,M/=2,r/=2}function N($e,ze){return m===1?$e[ze]:$e.readUInt16BE(ze*m)}var V;if(d){var Y=-1;for(V=r;V<S;V++)if(N(h,V)===N(t,Y===-1?0:V-Y)){if(Y===-1&&(Y=V),V-Y+1===M)return Y*m}else Y!==-1&&(V-=V-Y),Y=-1}else for(r+M>S&&(r=S-M),V=r;V>=0;V--){for(var q=!0,we=0;we<M;we++)if(N(h,V+we)!==N(t,we)){q=!1;break}if(q)return V}return-1}u.prototype.includes=function(t,r,c){return this.indexOf(t,r,c)!==-1},u.prototype.indexOf=function(t,r,c){return re(this,t,r,c,!0)},u.prototype.lastIndexOf=function(t,r,c){return re(this,t,r,c,!1)};function oe(h,t,r,c){r=Number(r)||0;var d=h.length-r;c?(c=Number(c),c>d&&(c=d)):c=d;var m=t.length;if(m%2!==0)throw new TypeError("Invalid hex string");c>m/2&&(c=m/2);for(var S=0;S<c;++S){var M=parseInt(t.substr(S*2,2),16);if(isNaN(M))return S;h[r+S]=M}return S}function P(h,t,r,c){return Se(me(t,h.length-r),h,r,c)}function H(h,t,r,c){return Se(Ct(t),h,r,c)}function y(h,t,r,c){return H(h,t,r,c)}function A(h,t,r,c){return Se(Ze(t),h,r,c)}function C(h,t,r,c){return Se(Ut(t,h.length-r),h,r,c)}u.prototype.write=function(t,r,c,d){if(r===void 0)d="utf8",c=this.length,r=0;else if(c===void 0&&typeof r=="string")d=r,c=this.length,r=0;else if(isFinite(r))r=r|0,isFinite(c)?(c=c|0,d===void 0&&(d="utf8")):(d=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var m=this.length-r;if((c===void 0||c>m)&&(c=m),t.length>0&&(c<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");d||(d="utf8");for(var S=!1;;)switch(d){case"hex":return oe(this,t,r,c);case"utf8":case"utf-8":return P(this,t,r,c);case"ascii":return H(this,t,r,c);case"latin1":case"binary":return y(this,t,r,c);case"base64":return A(this,t,r,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r,c);default:if(S)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),S=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(h,t,r){return t===0&&r===h.length?n.fromByteArray(h):n.fromByteArray(h.slice(t,r))}function D(h,t,r){r=Math.min(h.length,r);for(var c=[],d=t;d<r;){var m=h[d],S=null,M=m>239?4:m>223?3:m>191?2:1;if(d+M<=r){var N,V,Y,q;switch(M){case 1:m<128&&(S=m);break;case 2:N=h[d+1],(N&192)===128&&(q=(m&31)<<6|N&63,q>127&&(S=q));break;case 3:N=h[d+1],V=h[d+2],(N&192)===128&&(V&192)===128&&(q=(m&15)<<12|(N&63)<<6|V&63,q>2047&&(q<55296||q>57343)&&(S=q));break;case 4:N=h[d+1],V=h[d+2],Y=h[d+3],(N&192)===128&&(V&192)===128&&(Y&192)===128&&(q=(m&15)<<18|(N&63)<<12|(V&63)<<6|Y&63,q>65535&&q<1114112&&(S=q))}}S===null?(S=65533,M=1):S>65535&&(S-=65536,c.push(S>>>10&1023|55296),S=56320|S&1023),c.push(S),d+=M}return F(c)}var U=4096;function F(h){var t=h.length;if(t<=U)return String.fromCharCode.apply(String,h);for(var r="",c=0;c<t;)r+=String.fromCharCode.apply(String,h.slice(c,c+=U));return r}function L(h,t,r){var c="";r=Math.min(h.length,r);for(var d=t;d<r;++d)c+=String.fromCharCode(h[d]&127);return c}function ee(h,t,r){var c="";r=Math.min(h.length,r);for(var d=t;d<r;++d)c+=String.fromCharCode(h[d]);return c}function R(h,t,r){var c=h.length;(!t||t<0)&&(t=0),(!r||r<0||r>c)&&(r=c);for(var d="",m=t;m<r;++m)d+=At(h[m]);return d}function W(h,t,r){for(var c=h.slice(t,r),d="",m=0;m<c.length;m+=2)d+=String.fromCharCode(c[m]+c[m+1]*256);return d}u.prototype.slice=function(t,r){var c=this.length;t=~~t,r=r===void 0?c:~~r,t<0?(t+=c,t<0&&(t=0)):t>c&&(t=c),r<0?(r+=c,r<0&&(r=0)):r>c&&(r=c),r<t&&(r=t);var d;if(u.TYPED_ARRAY_SUPPORT)d=this.subarray(t,r),d.__proto__=u.prototype;else{var m=r-t;d=new u(m,void 0);for(var S=0;S<m;++S)d[S]=this[S+t]}return d};function k(h,t,r){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+t>r)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(t,r,c){t=t|0,r=r|0,c||k(t,r,this.length);for(var d=this[t],m=1,S=0;++S<r&&(m*=256);)d+=this[t+S]*m;return d},u.prototype.readUIntBE=function(t,r,c){t=t|0,r=r|0,c||k(t,r,this.length);for(var d=this[t+--r],m=1;r>0&&(m*=256);)d+=this[t+--r]*m;return d},u.prototype.readUInt8=function(t,r){return r||k(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,r){return r||k(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,r){return r||k(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,r){return r||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},u.prototype.readUInt32BE=function(t,r){return r||k(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,r,c){t=t|0,r=r|0,c||k(t,r,this.length);for(var d=this[t],m=1,S=0;++S<r&&(m*=256);)d+=this[t+S]*m;return m*=128,d>=m&&(d-=Math.pow(2,8*r)),d},u.prototype.readIntBE=function(t,r,c){t=t|0,r=r|0,c||k(t,r,this.length);for(var d=r,m=1,S=this[t+--d];d>0&&(m*=256);)S+=this[t+--d]*m;return m*=128,S>=m&&(S-=Math.pow(2,8*r)),S},u.prototype.readInt8=function(t,r){return r||k(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},u.prototype.readInt16LE=function(t,r){r||k(t,2,this.length);var c=this[t]|this[t+1]<<8;return c&32768?c|4294901760:c},u.prototype.readInt16BE=function(t,r){r||k(t,2,this.length);var c=this[t+1]|this[t]<<8;return c&32768?c|4294901760:c},u.prototype.readInt32LE=function(t,r){return r||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,r){return r||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,r){return r||k(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,r){return r||k(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,r){return r||k(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,r){return r||k(t,8,this.length),i.read(this,t,!1,52,8)};function O(h,t,r,c,d,m){if(!u.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>d||t<m)throw new RangeError('"value" argument is out of bounds');if(r+c>h.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(t,r,c,d){if(t=+t,r=r|0,c=c|0,!d){var m=Math.pow(2,8*c)-1;O(this,t,r,c,m,0)}var S=1,M=0;for(this[r]=t&255;++M<c&&(S*=256);)this[r+M]=t/S&255;return r+c},u.prototype.writeUIntBE=function(t,r,c,d){if(t=+t,r=r|0,c=c|0,!d){var m=Math.pow(2,8*c)-1;O(this,t,r,c,m,0)}var S=c-1,M=1;for(this[r+S]=t&255;--S>=0&&(M*=256);)this[r+S]=t/M&255;return r+c},u.prototype.writeUInt8=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=t&255,r+1};function te(h,t,r,c){t<0&&(t=65535+t+1);for(var d=0,m=Math.min(h.length-r,2);d<m;++d)h[r+d]=(t&255<<8*(c?d:1-d))>>>(c?d:1-d)*8}u.prototype.writeUInt16LE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):te(this,t,r,!0),r+2},u.prototype.writeUInt16BE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):te(this,t,r,!1),r+2};function ae(h,t,r,c){t<0&&(t=4294967295+t+1);for(var d=0,m=Math.min(h.length-r,4);d<m;++d)h[r+d]=t>>>(c?d:3-d)*8&255}u.prototype.writeUInt32LE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255):ae(this,t,r,!0),r+4},u.prototype.writeUInt32BE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):ae(this,t,r,!1),r+4},u.prototype.writeIntLE=function(t,r,c,d){if(t=+t,r=r|0,!d){var m=Math.pow(2,8*c-1);O(this,t,r,c,m-1,-m)}var S=0,M=1,N=0;for(this[r]=t&255;++S<c&&(M*=256);)t<0&&N===0&&this[r+S-1]!==0&&(N=1),this[r+S]=(t/M>>0)-N&255;return r+c},u.prototype.writeIntBE=function(t,r,c,d){if(t=+t,r=r|0,!d){var m=Math.pow(2,8*c-1);O(this,t,r,c,m-1,-m)}var S=c-1,M=1,N=0;for(this[r+S]=t&255;--S>=0&&(M*=256);)t<0&&N===0&&this[r+S+1]!==0&&(N=1),this[r+S]=(t/M>>0)-N&255;return r+c},u.prototype.writeInt8=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=t&255,r+1},u.prototype.writeInt16LE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8):te(this,t,r,!0),r+2},u.prototype.writeInt16BE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=t&255):te(this,t,r,!1),r+2},u.prototype.writeInt32LE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):ae(this,t,r,!0),r+4},u.prototype.writeInt32BE=function(t,r,c){return t=+t,r=r|0,c||O(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255):ae(this,t,r,!1),r+4};function ye(h,t,r,c,d,m){if(r+c>h.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function We(h,t,r,c,d){return d||ye(h,t,r,4),i.write(h,t,r,c,23,4),r+4}u.prototype.writeFloatLE=function(t,r,c){return We(this,t,r,!0,c)},u.prototype.writeFloatBE=function(t,r,c){return We(this,t,r,!1,c)};function Je(h,t,r,c,d){return d||ye(h,t,r,8),i.write(h,t,r,c,52,8),r+8}u.prototype.writeDoubleLE=function(t,r,c){return Je(this,t,r,!0,c)},u.prototype.writeDoubleBE=function(t,r,c){return Je(this,t,r,!1,c)},u.prototype.copy=function(t,r,c,d){if(c||(c=0),!d&&d!==0&&(d=this.length),r>=t.length&&(r=t.length),r||(r=0),d>0&&d<c&&(d=c),d===c||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),t.length-r<d-c&&(d=t.length-r+c);var m=d-c,S;if(this===t&&c<r&&r<d)for(S=m-1;S>=0;--S)t[S+r]=this[S+c];else if(m<1e3||!u.TYPED_ARRAY_SUPPORT)for(S=0;S<m;++S)t[S+r]=this[S+c];else Uint8Array.prototype.set.call(t,this.subarray(c,c+m),r);return m},u.prototype.fill=function(t,r,c,d){if(typeof t=="string"){if(typeof r=="string"?(d=r,r=0,c=this.length):typeof c=="string"&&(d=c,c=this.length),t.length===1){var m=t.charCodeAt(0);m<256&&(t=m)}if(d!==void 0&&typeof d!="string")throw new TypeError("encoding must be a string");if(typeof d=="string"&&!u.isEncoding(d))throw new TypeError("Unknown encoding: "+d)}else typeof t=="number"&&(t=t&255);if(r<0||this.length<r||this.length<c)throw new RangeError("Out of range index");if(c<=r)return this;r=r>>>0,c=c===void 0?this.length:c>>>0,t||(t=0);var S;if(typeof t=="number")for(S=r;S<c;++S)this[S]=t;else{var M=u.isBuffer(t)?t:me(new u(t,d).toString()),N=M.length;for(S=0;S<c-r;++S)this[S+r]=M[S%N]}return this};var mt=/[^+\/0-9A-Za-z-_]/g;function St(h){if(h=wt(h).replace(mt,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function wt(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function At(h){return h<16?"0"+h.toString(16):h.toString(16)}function me(h,t){t=t||1/0;for(var r,c=h.length,d=null,m=[],S=0;S<c;++S){if(r=h.charCodeAt(S),r>55295&&r<57344){if(!d){if(r>56319){(t-=3)>-1&&m.push(239,191,189);continue}else if(S+1===c){(t-=3)>-1&&m.push(239,191,189);continue}d=r;continue}if(r<56320){(t-=3)>-1&&m.push(239,191,189),d=r;continue}r=(d-55296<<10|r-56320)+65536}else d&&(t-=3)>-1&&m.push(239,191,189);if(d=null,r<128){if((t-=1)<0)break;m.push(r)}else if(r<2048){if((t-=2)<0)break;m.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;m.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;m.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return m}function Ct(h){for(var t=[],r=0;r<h.length;++r)t.push(h.charCodeAt(r)&255);return t}function Ut(h,t){for(var r,c,d,m=[],S=0;S<h.length&&!((t-=2)<0);++S)r=h.charCodeAt(S),c=r>>8,d=r%256,m.push(d),m.push(c);return m}function Ze(h){return n.toByteArray(St(h))}function Se(h,t,r,c){for(var d=0;d<c&&!(d+r>=t.length||d>=h.length);++d)t[d+r]=h[d];return d}function Et(h){return h!==h}})(K);var X;typeof window<"u"&&window.crypto&&(X=window.crypto);!X&&typeof window<"u"&&window.msCrypto&&(X=window.msCrypto);!X&&typeof global<"u"&&global.crypto&&(X=global.crypto);if(!X&&typeof require=="function")try{X=require("crypto")}catch{}function Mt(){if(X){if(typeof X.getRandomValues=="function")try{return X.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof X.randomBytes=="function")try{return X.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function Ot(o){for(var n=o.words,i=o.sigBytes,e=[],s=0;s<i;s++){var a=n[s>>>2]>>>24-s%4*8&255;e.push((a>>>4).toString(16)),e.push((a&15).toString(16))}return e.join("")}var Nt=function(){function o(i,e){i=this.words=i||[],e!=null?this.sigBytes=e:this.sigBytes=i.length*4}var n=o.prototype;return n.random=function(e){for(var s=[],a=0;a<e;a+=4)s.push(Mt());return new o(s,e)},n.toString=function(){return Ot(this)},o}(),de={},Ee={},Kt={get exports(){return Ee},set exports(o){Ee=o}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(o){var n,i,e,s,a,f,u,l,g,p,v,w,E,I,x,b,B,j,se,G,re,ne,oe;(function(P){var H=typeof Ue=="object"?Ue:typeof self=="object"?self:typeof this=="object"?this:{};P(y(H,y(o.exports)));function y(A,C){return A!==H&&(typeof Object.create=="function"?Object.defineProperty(A,"__esModule",{value:!0}):A.__esModule=!0),function(_,D){return A[_]=C?C(_,D):D}}})(function(P){var H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,A){y.__proto__=A}||function(y,A){for(var C in A)A.hasOwnProperty(C)&&(y[C]=A[C])};n=function(y,A){H(y,A);function C(){this.constructor=y}y.prototype=A===null?Object.create(A):(C.prototype=A.prototype,new C)},i=Object.assign||function(y){for(var A,C=1,_=arguments.length;C<_;C++){A=arguments[C];for(var D in A)Object.prototype.hasOwnProperty.call(A,D)&&(y[D]=A[D])}return y},e=function(y,A){var C={};for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&A.indexOf(_)<0&&(C[_]=y[_]);if(y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,_=Object.getOwnPropertySymbols(y);D<_.length;D++)A.indexOf(_[D])<0&&Object.prototype.propertyIsEnumerable.call(y,_[D])&&(C[_[D]]=y[_[D]]);return C},s=function(y,A,C,_){var D=arguments.length,U=D<3?A:_===null?_=Object.getOwnPropertyDescriptor(A,C):_,F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(y,A,C,_);else for(var L=y.length-1;L>=0;L--)(F=y[L])&&(U=(D<3?F(U):D>3?F(A,C,U):F(A,C))||U);return D>3&&U&&Object.defineProperty(A,C,U),U},a=function(y,A){return function(C,_){A(C,_,y)}},f=function(y,A){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(y,A)},u=function(y,A,C,_){function D(U){return U instanceof C?U:new C(function(F){F(U)})}return new(C||(C=Promise))(function(U,F){function L(W){try{R(_.next(W))}catch(k){F(k)}}function ee(W){try{R(_.throw(W))}catch(k){F(k)}}function R(W){W.done?U(W.value):D(W.value).then(L,ee)}R((_=_.apply(y,A||[])).next())})},l=function(y,A){var C={label:0,sent:function(){if(U[0]&1)throw U[1];return U[1]},trys:[],ops:[]},_,D,U,F;return F={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function L(R){return function(W){return ee([R,W])}}function ee(R){if(_)throw new TypeError("Generator is already executing.");for(;C;)try{if(_=1,D&&(U=R[0]&2?D.return:R[0]?D.throw||((U=D.return)&&U.call(D),0):D.next)&&!(U=U.call(D,R[1])).done)return U;switch(D=0,U&&(R=[R[0]&2,U.value]),R[0]){case 0:case 1:U=R;break;case 4:return C.label++,{value:R[1],done:!1};case 5:C.label++,D=R[1],R=[0];continue;case 7:R=C.ops.pop(),C.trys.pop();continue;default:if(U=C.trys,!(U=U.length>0&&U[U.length-1])&&(R[0]===6||R[0]===2)){C=0;continue}if(R[0]===3&&(!U||R[1]>U[0]&&R[1]<U[3])){C.label=R[1];break}if(R[0]===6&&C.label<U[1]){C.label=U[1],U=R;break}if(U&&C.label<U[2]){C.label=U[2],C.ops.push(R);break}U[2]&&C.ops.pop(),C.trys.pop();continue}R=A.call(y,C)}catch(W){R=[6,W],D=0}finally{_=U=0}if(R[0]&5)throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}},oe=function(y,A,C,_){_===void 0&&(_=C),y[_]=A[C]},g=function(y,A){for(var C in y)C!=="default"&&!A.hasOwnProperty(C)&&(A[C]=y[C])},p=function(y){var A=typeof Symbol=="function"&&Symbol.iterator,C=A&&y[A],_=0;if(C)return C.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&_>=y.length&&(y=void 0),{value:y&&y[_++],done:!y}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")},v=function(y,A){var C=typeof Symbol=="function"&&y[Symbol.iterator];if(!C)return y;var _=C.call(y),D,U=[],F;try{for(;(A===void 0||A-- >0)&&!(D=_.next()).done;)U.push(D.value)}catch(L){F={error:L}}finally{try{D&&!D.done&&(C=_.return)&&C.call(_)}finally{if(F)throw F.error}}return U},w=function(){for(var y=[],A=0;A<arguments.length;A++)y=y.concat(v(arguments[A]));return y},E=function(){for(var y=0,A=0,C=arguments.length;A<C;A++)y+=arguments[A].length;for(var _=Array(y),D=0,A=0;A<C;A++)for(var U=arguments[A],F=0,L=U.length;F<L;F++,D++)_[D]=U[F];return _},I=function(y){return this instanceof I?(this.v=y,this):new I(y)},x=function(y,A,C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _=C.apply(y,A||[]),D,U=[];return D={},F("next"),F("throw"),F("return"),D[Symbol.asyncIterator]=function(){return this},D;function F(O){_[O]&&(D[O]=function(te){return new Promise(function(ae,ye){U.push([O,te,ae,ye])>1||L(O,te)})})}function L(O,te){try{ee(_[O](te))}catch(ae){k(U[0][3],ae)}}function ee(O){O.value instanceof I?Promise.resolve(O.value.v).then(R,W):k(U[0][2],O)}function R(O){L("next",O)}function W(O){L("throw",O)}function k(O,te){O(te),U.shift(),U.length&&L(U[0][0],U[0][1])}},b=function(y){var A,C;return A={},_("next"),_("throw",function(D){throw D}),_("return"),A[Symbol.iterator]=function(){return this},A;function _(D,U){A[D]=y[D]?function(F){return(C=!C)?{value:I(y[D](F)),done:D==="return"}:U?U(F):F}:U}},B=function(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=y[Symbol.asyncIterator],C;return A?A.call(y):(y=typeof p=="function"?p(y):y[Symbol.iterator](),C={},_("next"),_("throw"),_("return"),C[Symbol.asyncIterator]=function(){return this},C);function _(U){C[U]=y[U]&&function(F){return new Promise(function(L,ee){F=y[U](F),D(L,ee,F.done,F.value)})}}function D(U,F,L,ee){Promise.resolve(ee).then(function(R){U({value:R,done:L})},F)}},j=function(y,A){return Object.defineProperty?Object.defineProperty(y,"raw",{value:A}):y.raw=A,y},se=function(y){if(y&&y.__esModule)return y;var A={};if(y!=null)for(var C in y)Object.hasOwnProperty.call(y,C)&&(A[C]=y[C]);return A.default=y,A},G=function(y){return y&&y.__esModule?y:{default:y}},re=function(y,A){if(!A.has(y))throw new TypeError("attempted to get private field on non-instance");return A.get(y)},ne=function(y,A,C){if(!A.has(y))throw new TypeError("attempted to set private field on non-instance");return A.set(y,C),C},P("__extends",n),P("__assign",i),P("__rest",e),P("__decorate",s),P("__param",a),P("__metadata",f),P("__awaiter",u),P("__generator",l),P("__exportStar",g),P("__createBinding",oe),P("__values",p),P("__read",v),P("__spread",w),P("__spreadArrays",E),P("__await",I),P("__asyncGenerator",x),P("__asyncDelegator",b),P("__asyncValues",B),P("__makeTemplateObject",j),P("__importStar",se),P("__importDefault",G),P("__classPrivateFieldGet",re),P("__classPrivateFieldSet",ne)})})(Kt);var De={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.MAX_HASHABLE_LENGTH=Z.INIT=Z.KEY=Z.DIGEST_LENGTH=Z.BLOCK_SIZE=void 0;Z.BLOCK_SIZE=64;Z.DIGEST_LENGTH=32;Z.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);Z.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Z.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1;var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.RawSha256=void 0;var $=Z,kt=function(){function o(){this.state=Int32Array.from($.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return o.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var i=0,e=n.byteLength;if(this.bytesHashed+=e,this.bytesHashed*8>$.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;e>0;)this.buffer[this.bufferLength++]=n[i++],e--,this.bufferLength===$.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},o.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,i=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),e=this.bufferLength;if(i.setUint8(this.bufferLength++,128),e%$.BLOCK_SIZE>=$.BLOCK_SIZE-8){for(var s=this.bufferLength;s<$.BLOCK_SIZE;s++)i.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<$.BLOCK_SIZE-8;s++)i.setUint8(s,0);i.setUint32($.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),i.setUint32($.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array($.DIGEST_LENGTH),s=0;s<8;s++)a[s*4]=this.state[s]>>>24&255,a[s*4+1]=this.state[s]>>>16&255,a[s*4+2]=this.state[s]>>>8&255,a[s*4+3]=this.state[s]>>>0&255;return a},o.prototype.hashBuffer=function(){for(var n=this,i=n.buffer,e=n.state,s=e[0],a=e[1],f=e[2],u=e[3],l=e[4],g=e[5],p=e[6],v=e[7],w=0;w<$.BLOCK_SIZE;w++){if(w<16)this.temp[w]=(i[w*4]&255)<<24|(i[w*4+1]&255)<<16|(i[w*4+2]&255)<<8|i[w*4+3]&255;else{var E=this.temp[w-2],I=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=this.temp[w-15];var x=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;this.temp[w]=(I+this.temp[w-7]|0)+(x+this.temp[w-16]|0)}var b=(((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))+(l&g^~l&p)|0)+(v+($.KEY[w]+this.temp[w]|0)|0)|0,B=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&a^s&f^a&f)|0;v=p,p=g,g=l,l=u+b|0,u=f,f=a,a=s,s=b+B|0}e[0]+=s,e[1]+=a,e[2]+=f,e[3]+=u,e[4]+=l,e[5]+=g,e[6]+=p,e[7]+=v},o}();xe.RawSha256=kt;var dt={},Ie={};const Lt=o=>{const n=[];for(let i=0,e=o.length;i<e;i++){const s=o.charCodeAt(i);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192,s&63|128);else if(i+1<o.length&&(s&64512)===55296&&(o.charCodeAt(i+1)&64512)===56320){const a=65536+((s&1023)<<10)+(o.charCodeAt(++i)&1023);n.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else n.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(n)},Vt=o=>{let n="";for(let i=0,e=o.length;i<e;i++){const s=o[i];if(s<128)n+=String.fromCharCode(s);else if(192<=s&&s<224){const a=o[++i];n+=String.fromCharCode((s&31)<<6|a&63)}else if(240<=s&&s<365){const f="%"+[s,o[++i],o[++i],o[++i]].map(u=>u.toString(16)).join("%");n+=decodeURIComponent(f)}else n+=String.fromCharCode((s&15)<<12|(o[++i]&63)<<6|o[++i]&63)}return n};function qt(o){return new TextEncoder().encode(o)}function jt(o){return new TextDecoder("utf-8").decode(o)}const Ht=o=>typeof TextEncoder=="function"?qt(o):Lt(o),Yt=o=>typeof TextDecoder=="function"?jt(o):Vt(o),Gt=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:Ht,toUtf8:Yt},Symbol.toStringTag,{value:"Module"})),Wt=ct(Gt);Object.defineProperty(Ie,"__esModule",{value:!0});Ie.convertToBuffer=void 0;var Jt=Wt,Zt=typeof Buffer<"u"&&Buffer.from?function(o){return Buffer.from(o,"utf8")}:Jt.fromUtf8;function $t(o){return o instanceof Uint8Array?o:typeof o=="string"?Zt(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}Ie.convertToBuffer=$t;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.isEmptyData=void 0;function zt(o){return typeof o=="string"?o.length===0:o.byteLength===0}Fe.isEmptyData=zt;var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.numToUint8=void 0;function Xt(o){return new Uint8Array([(o&4278190080)>>24,(o&16711680)>>16,(o&65280)>>8,o&255])}Re.numToUint8=Xt;var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.uint32ArrayFrom=void 0;function Qt(o){if(!Array.from){for(var n=new Uint32Array(o.length),i=0;i<o.length;)n[i]=o[i];return n}return Uint32Array.from(o)}Pe.uint32ArrayFrom=Qt;(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.uint32ArrayFrom=o.numToUint8=o.isEmptyData=o.convertToBuffer=void 0;var n=Ie;Object.defineProperty(o,"convertToBuffer",{enumerable:!0,get:function(){return n.convertToBuffer}});var i=Fe;Object.defineProperty(o,"isEmptyData",{enumerable:!0,get:function(){return i.isEmptyData}});var e=Re;Object.defineProperty(o,"numToUint8",{enumerable:!0,get:function(){return e.numToUint8}});var s=Pe;Object.defineProperty(o,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})})(dt);Object.defineProperty(De,"__esModule",{value:!0});De.Sha256=void 0;var Xe=Ee,Te=Z,Oe=xe,Ne=dt,er=function(){function o(n){if(this.hash=new Oe.RawSha256,n){this.outer=new Oe.RawSha256;var i=tr(n),e=new Uint8Array(Te.BLOCK_SIZE);e.set(i);for(var s=0;s<Te.BLOCK_SIZE;s++)i[s]^=54,e[s]^=92;this.hash.update(i),this.outer.update(e);for(var s=0;s<i.byteLength;s++)i[s]=0}}return o.prototype.update=function(n){if(!((0,Ne.isEmptyData)(n)||this.error))try{this.hash.update((0,Ne.convertToBuffer)(n))}catch(i){this.error=i}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return(0,Xe.__awaiter)(this,void 0,void 0,function(){return(0,Xe.__generator)(this,function(n){return[2,this.digestSync()]})})},o}();De.Sha256=er;function tr(o){var n=(0,Ne.convertToBuffer)(o);if(n.byteLength>Te.BLOCK_SIZE){var i=new Oe.RawSha256;i.update(n),n=i.digest()}var e=new Uint8Array(Te.BLOCK_SIZE);return e.set(n),e}(function(o){Object.defineProperty(o,"__esModule",{value:!0});var n=Ee;(0,n.__exportStar)(De,o)})(de);function T(o,n){o!=null&&this.fromString(o,n)}function J(){return new T(null)}var fe,rr=0xdeadbeefcafe,Qe=(rr&16777215)==15715070;function nr(o,n,i,e,s,a){for(;--a>=0;){var f=n*this[o++]+i[e]+s;s=Math.floor(f/67108864),i[e++]=f&67108863}return s}function ir(o,n,i,e,s,a){for(var f=n&32767,u=n>>15;--a>=0;){var l=this[o]&32767,g=this[o++]>>15,p=u*l+g*f;l=f*l+((p&32767)<<15)+i[e]+(s&1073741823),s=(l>>>30)+(p>>>15)+u*g+(s>>>30),i[e++]=l&1073741823}return s}function sr(o,n,i,e,s,a){for(var f=n&16383,u=n>>14;--a>=0;){var l=this[o]&16383,g=this[o++]>>14,p=u*l+g*f;l=f*l+((p&16383)<<14)+i[e]+s,s=(l>>28)+(p>>14)+u*g,i[e++]=l&268435455}return s}var et=typeof navigator<"u";et&&Qe&&navigator.appName=="Microsoft Internet Explorer"?(T.prototype.am=ir,fe=30):et&&Qe&&navigator.appName!="Netscape"?(T.prototype.am=nr,fe=26):(T.prototype.am=sr,fe=28);T.prototype.DB=fe;T.prototype.DM=(1<<fe)-1;T.prototype.DV=1<<fe;var He=52;T.prototype.FV=Math.pow(2,He);T.prototype.F1=He-fe;T.prototype.F2=2*fe-He;var or="0123456789abcdefghijklmnopqrstuvwxyz",Be=new Array,ge,Q;ge="0".charCodeAt(0);for(Q=0;Q<=9;++Q)Be[ge++]=Q;ge="a".charCodeAt(0);for(Q=10;Q<36;++Q)Be[ge++]=Q;ge="A".charCodeAt(0);for(Q=10;Q<36;++Q)Be[ge++]=Q;function tt(o){return or.charAt(o)}function ar(o,n){var i=Be[o.charCodeAt(n)];return i??-1}function ur(o){for(var n=this.t-1;n>=0;--n)o[n]=this[n];o.t=this.t,o.s=this.s}function fr(o){this.t=1,this.s=o<0?-1:0,o>0?this[0]=o:o<-1?this[0]=o+this.DV:this.t=0}function Ye(o){var n=J();return n.fromInt(o),n}function hr(o,n){var i;if(n==16)i=4;else if(n==8)i=3;else if(n==2)i=1;else if(n==32)i=5;else if(n==4)i=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var e=o.length,s=!1,a=0;--e>=0;){var f=ar(o,e);if(f<0){o.charAt(e)=="-"&&(s=!0);continue}s=!1,a==0?this[this.t++]=f:a+i>this.DB?(this[this.t-1]|=(f&(1<<this.DB-a)-1)<<a,this[this.t++]=f>>this.DB-a):this[this.t-1]|=f<<a,a+=i,a>=this.DB&&(a-=this.DB)}this.clamp(),s&&T.ZERO.subTo(this,this)}function cr(){for(var o=this.s&this.DM;this.t>0&&this[this.t-1]==o;)--this.t}function lr(o){if(this.s<0)return"-"+this.negate().toString(o);var n;if(o==16)n=4;else if(o==8)n=3;else if(o==2)n=1;else if(o==32)n=5;else if(o==4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var i=(1<<n)-1,e,s=!1,a="",f=this.t,u=this.DB-f*this.DB%n;if(f-- >0)for(u<this.DB&&(e=this[f]>>u)>0&&(s=!0,a=tt(e));f>=0;)u<n?(e=(this[f]&(1<<u)-1)<<n-u,e|=this[--f]>>(u+=this.DB-n)):(e=this[f]>>(u-=n)&i,u<=0&&(u+=this.DB,--f)),e>0&&(s=!0),s&&(a+=tt(e));return s?a:"0"}function dr(){var o=J();return T.ZERO.subTo(this,o),o}function gr(){return this.s<0?this.negate():this}function pr(o){var n=this.s-o.s;if(n!=0)return n;var i=this.t;if(n=i-o.t,n!=0)return this.s<0?-n:n;for(;--i>=0;)if((n=this[i]-o[i])!=0)return n;return 0}function Ge(o){var n=1,i;return(i=o>>>16)!=0&&(o=i,n+=16),(i=o>>8)!=0&&(o=i,n+=8),(i=o>>4)!=0&&(o=i,n+=4),(i=o>>2)!=0&&(o=i,n+=2),(i=o>>1)!=0&&(o=i,n+=1),n}function vr(){return this.t<=0?0:this.DB*(this.t-1)+Ge(this[this.t-1]^this.s&this.DM)}function yr(o,n){var i;for(i=this.t-1;i>=0;--i)n[i+o]=this[i];for(i=o-1;i>=0;--i)n[i]=0;n.t=this.t+o,n.s=this.s}function mr(o,n){for(var i=o;i<this.t;++i)n[i-o]=this[i];n.t=Math.max(this.t-o,0),n.s=this.s}function Sr(o,n){var i=o%this.DB,e=this.DB-i,s=(1<<e)-1,a=Math.floor(o/this.DB),f=this.s<<i&this.DM,u;for(u=this.t-1;u>=0;--u)n[u+a+1]=this[u]>>e|f,f=(this[u]&s)<<i;for(u=a-1;u>=0;--u)n[u]=0;n[a]=f,n.t=this.t+a+1,n.s=this.s,n.clamp()}function wr(o,n){n.s=this.s;var i=Math.floor(o/this.DB);if(i>=this.t){n.t=0;return}var e=o%this.DB,s=this.DB-e,a=(1<<e)-1;n[0]=this[i]>>e;for(var f=i+1;f<this.t;++f)n[f-i-1]|=(this[f]&a)<<s,n[f-i]=this[f]>>e;e>0&&(n[this.t-i-1]|=(this.s&a)<<s),n.t=this.t-i,n.clamp()}function Ar(o,n){for(var i=0,e=0,s=Math.min(o.t,this.t);i<s;)e+=this[i]-o[i],n[i++]=e&this.DM,e>>=this.DB;if(o.t<this.t){for(e-=o.s;i<this.t;)e+=this[i],n[i++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;i<o.t;)e-=o[i],n[i++]=e&this.DM,e>>=this.DB;e-=o.s}n.s=e<0?-1:0,e<-1?n[i++]=this.DV+e:e>0&&(n[i++]=e),n.t=i,n.clamp()}function Cr(o,n){var i=this.abs(),e=o.abs(),s=i.t;for(n.t=s+e.t;--s>=0;)n[s]=0;for(s=0;s<e.t;++s)n[s+i.t]=i.am(0,e[s],n,s,0,i.t);n.s=0,n.clamp(),this.s!=o.s&&T.ZERO.subTo(n,n)}function Ur(o){for(var n=this.abs(),i=o.t=2*n.t;--i>=0;)o[i]=0;for(i=0;i<n.t-1;++i){var e=n.am(i,n[i],o,2*i,0,1);(o[i+n.t]+=n.am(i+1,2*n[i],o,2*i+1,e,n.t-i-1))>=n.DV&&(o[i+n.t]-=n.DV,o[i+n.t+1]=1)}o.t>0&&(o[o.t-1]+=n.am(i,n[i],o,2*i,0,1)),o.s=0,o.clamp()}function Er(o,n,i){var e=o.abs();if(!(e.t<=0)){var s=this.abs();if(s.t<e.t){n!=null&&n.fromInt(0),i!=null&&this.copyTo(i);return}i==null&&(i=J());var a=J(),f=this.s,u=o.s,l=this.DB-Ge(e[e.t-1]);l>0?(e.lShiftTo(l,a),s.lShiftTo(l,i)):(e.copyTo(a),s.copyTo(i));var g=a.t,p=a[g-1];if(p!=0){var v=p*(1<<this.F1)+(g>1?a[g-2]>>this.F2:0),w=this.FV/v,E=(1<<this.F1)/v,I=1<<this.F2,x=i.t,b=x-g,B=n??J();for(a.dlShiftTo(b,B),i.compareTo(B)>=0&&(i[i.t++]=1,i.subTo(B,i)),T.ONE.dlShiftTo(g,B),B.subTo(a,a);a.t<g;)a[a.t++]=0;for(;--b>=0;){var j=i[--x]==p?this.DM:Math.floor(i[x]*w+(i[x-1]+I)*E);if((i[x]+=a.am(0,j,i,b,0,g))<j)for(a.dlShiftTo(b,B),i.subTo(B,i);i[x]<--j;)i.subTo(B,i)}n!=null&&(i.drShiftTo(g,n),f!=u&&T.ZERO.subTo(n,n)),i.t=g,i.clamp(),l>0&&i.rShiftTo(l,i),f<0&&T.ZERO.subTo(i,i)}}}function Tr(o){var n=J();return this.abs().divRemTo(o,null,n),this.s<0&&n.compareTo(T.ZERO)>0&&o.subTo(n,n),n}function _r(){if(this.t<1)return 0;var o=this[0];if(!(o&1))return 0;var n=o&3;return n=n*(2-(o&15)*n)&15,n=n*(2-(o&255)*n)&255,n=n*(2-((o&65535)*n&65535))&65535,n=n*(2-o*n%this.DV)%this.DV,n>0?this.DV-n:-n}function Dr(o){return this.compareTo(o)==0}function xr(o,n){for(var i=0,e=0,s=Math.min(o.t,this.t);i<s;)e+=this[i]+o[i],n[i++]=e&this.DM,e>>=this.DB;if(o.t<this.t){for(e+=o.s;i<this.t;)e+=this[i],n[i++]=e&this.DM,e>>=this.DB;e+=this.s}else{for(e+=this.s;i<o.t;)e+=o[i],n[i++]=e&this.DM,e>>=this.DB;e+=o.s}n.s=e<0?-1:0,e>0?n[i++]=e:e<-1&&(n[i++]=this.DV+e),n.t=i,n.clamp()}function Ir(o){var n=J();return this.addTo(o,n),n}function Fr(o){var n=J();return this.subTo(o,n),n}function Rr(o){var n=J();return this.multiplyTo(o,n),n}function Pr(o){var n=J();return this.divRemTo(o,n,null),n}function pe(o){this.m=o,this.mp=o.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<o.DB-15)-1,this.mt2=2*o.t}function Br(o){var n=J();return o.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),o.s<0&&n.compareTo(T.ZERO)>0&&this.m.subTo(n,n),n}function br(o){var n=J();return o.copyTo(n),this.reduce(n),n}function Mr(o){for(;o.t<=this.mt2;)o[o.t++]=0;for(var n=0;n<this.m.t;++n){var i=o[n]&32767,e=i*this.mpl+((i*this.mph+(o[n]>>15)*this.mpl&this.um)<<15)&o.DM;for(i=n+this.m.t,o[i]+=this.m.am(0,e,o,n,0,this.m.t);o[i]>=o.DV;)o[i]-=o.DV,o[++i]++}o.clamp(),o.drShiftTo(this.m.t,o),o.compareTo(this.m)>=0&&o.subTo(this.m,o)}function Or(o,n){o.squareTo(n),this.reduce(n)}function Nr(o,n,i){o.multiplyTo(n,i),this.reduce(i)}pe.prototype.convert=Br;pe.prototype.revert=br;pe.prototype.reduce=Mr;pe.prototype.mulTo=Nr;pe.prototype.sqrTo=Or;function Kr(o,n,i){var e=o.bitLength(),s,a=Ye(1),f=new pe(n);if(e<=0)return a;e<18?s=1:e<48?s=3:e<144?s=4:e<768?s=5:s=6;var u=new Array,l=3,g=s-1,p=(1<<s)-1;if(u[1]=f.convert(this),s>1){var v=J();for(f.sqrTo(u[1],v);l<=p;)u[l]=J(),f.mulTo(v,u[l-2],u[l]),l+=2}var w=o.t-1,E,I=!0,x=J(),b;for(e=Ge(o[w])-1;w>=0;){for(e>=g?E=o[w]>>e-g&p:(E=(o[w]&(1<<e+1)-1)<<g-e,w>0&&(E|=o[w-1]>>this.DB+e-g)),l=s;!(E&1);)E>>=1,--l;if((e-=l)<0&&(e+=this.DB,--w),I)u[E].copyTo(a),I=!1;else{for(;l>1;)f.sqrTo(a,x),f.sqrTo(x,a),l-=2;l>0?f.sqrTo(a,x):(b=a,a=x,x=b),f.mulTo(x,u[E],a)}for(;w>=0&&!(o[w]&1<<e);)f.sqrTo(a,x),b=a,a=x,x=b,--e<0&&(e=this.DB-1,--w)}var B=f.revert(a);return i(null,B),B}T.prototype.copyTo=ur;T.prototype.fromInt=fr;T.prototype.fromString=hr;T.prototype.clamp=cr;T.prototype.dlShiftTo=yr;T.prototype.drShiftTo=mr;T.prototype.lShiftTo=Sr;T.prototype.rShiftTo=wr;T.prototype.subTo=Ar;T.prototype.multiplyTo=Cr;T.prototype.squareTo=Ur;T.prototype.divRemTo=Er;T.prototype.invDigit=_r;T.prototype.addTo=xr;T.prototype.toString=lr;T.prototype.negate=dr;T.prototype.abs=gr;T.prototype.compareTo=pr;T.prototype.bitLength=vr;T.prototype.mod=Tr;T.prototype.equals=Dr;T.prototype.add=Ir;T.prototype.subtract=Fr;T.prototype.multiply=Rr;T.prototype.divide=Pr;T.prototype.modPow=Kr;T.ZERO=Ye(0);T.ONE=Ye(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Me(o){return K.Buffer.from(new Nt().random(o).toString(),"hex")}var kr=/^[89a-f]/i,Lr="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",Vr="userAttributes.",le=function(){function o(i){this.N=new T(Lr,16),this.g=new T("2",16),this.k=new T(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=K.Buffer.from("Caldera Derived Key","utf8"),this.poolName=i}var n=o.prototype;return n.getSmallAValue=function(){return this.smallAValue},n.getLargeAValue=function(e){var s=this;this.largeAValue?e(null,this.largeAValue):this.calculateA(this.smallAValue,function(a,f){a&&e(a,null),s.largeAValue=f,e(null,s.largeAValue)})},n.generateRandomSmallA=function(){var e=Me(128).toString("hex"),s=new T(e,16);return s},n.generateRandomString=function(){return Me(40).toString("base64")},n.getRandomPassword=function(){return this.randomPassword},n.getSaltDevices=function(){return this.SaltToHashDevices},n.getVerifierDevices=function(){return this.verifierDevices},n.generateHashDevice=function(e,s,a){var f=this;this.randomPassword=this.generateRandomString();var u=""+e+s+":"+this.randomPassword,l=this.hash(u),g=Me(16).toString("hex");this.SaltToHashDevices=this.padHex(new T(g,16)),this.g.modPow(new T(this.hexHash(this.SaltToHashDevices+l),16),this.N,function(p,v){p&&a(p,null),f.verifierDevices=f.padHex(v),a(null,null)})},n.calculateA=function(e,s){var a=this;this.g.modPow(e,this.N,function(f,u){f&&s(f,null),u.mod(a.N).equals(T.ZERO)&&s(new Error("Illegal paramater. A mod N cannot be 0."),null),s(null,u)})},n.calculateU=function(e,s){this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(s));var a=new T(this.UHexHash,16);return a},n.hash=function(e){var s=new de.Sha256;s.update(e);var a=s.digestSync(),f=K.Buffer.from(a).toString("hex");return new Array(64-f.length).join("0")+f},n.hexHash=function(e){return this.hash(K.Buffer.from(e,"hex"))},n.computehkdf=function(e,s){var a=K.Buffer.concat([this.infoBits,K.Buffer.from(String.fromCharCode(1),"utf8")]),f=new de.Sha256(s);f.update(e);var u=f.digestSync(),l=new de.Sha256(u);l.update(a);var g=l.digestSync(),p=g,v=p.slice(0,16);return v},n.getPasswordAuthenticationKey=function(e,s,a,f,u){var l=this;if(a.mod(this.N).equals(T.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,a),this.UValue.equals(T.ZERO))throw new Error("U cannot be zero.");var g=""+this.poolName+e+":"+s,p=this.hash(g),v=new T(this.hexHash(this.padHex(f)+p),16);this.calculateS(v,a,function(w,E){w&&u(w,null);var I=l.computehkdf(K.Buffer.from(l.padHex(E),"hex"),K.Buffer.from(l.padHex(l.UValue),"hex"));u(null,I)})},n.calculateS=function(e,s,a){var f=this;this.g.modPow(e,this.N,function(u,l){u&&a(u,null);var g=s.subtract(f.k.multiply(l));g.modPow(f.smallAValue.add(f.UValue.multiply(e)),f.N,function(p,v){p&&a(p,null),a(null,v.mod(f.N))})})},n.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return Vr},n.padHex=function(e){if(!(e instanceof T))throw new Error("Not a BigInteger");var s=e.compareTo(T.ZERO)<0,a=e.abs().toString(16);if(a=a.length%2!==0?"0"+a:a,a=kr.test(a)?"00"+a:a,s){var f=a.split("").map(function(l){var g=~parseInt(l,16)&15;return"0123456789ABCDEF".charAt(g)}).join(""),u=new T(f,16).add(T.ONE);a=u.toString(16),a.toUpperCase().startsWith("FF8")&&(a=a.substring(2))}return a},o}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var gt=function(){function o(i){this.jwtToken=i||"",this.payload=this.decodePayload()}var n=o.prototype;return n.getJwtToken=function(){return this.jwtToken},n.getExpiration=function(){return this.payload.exp},n.getIssuedAt=function(){return this.payload.iat},n.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(K.Buffer.from(e,"base64").toString("utf8"))}catch{return{}}},o}();function qr(o,n){o.prototype=Object.create(n.prototype),o.prototype.constructor=o,Ke(o,n)}function Ke(o,n){return Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},Ke(o,n)}var rt=function(o){qr(n,o);function n(i){var e=i===void 0?{}:i,s=e.AccessToken;return o.call(this,s||"")||this}return n}(gt);function jr(o,n){o.prototype=Object.create(n.prototype),o.prototype.constructor=o,ke(o,n)}function ke(o,n){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},ke(o,n)}var nt=function(o){jr(n,o);function n(i){var e=i===void 0?{}:i,s=e.IdToken;return o.call(this,s||"")||this}return n}(gt);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var it=function(){function o(i){var e=i===void 0?{}:i,s=e.RefreshToken;this.token=s||""}var n=o.prototype;return n.getToken=function(){return this.token},o}(),Hr="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Le="aws-amplify/"+Hr,ue={userAgent:Le+" js",product:"",navigator:null,isReactNative:!1};if(typeof navigator<"u"&&navigator.product)switch(ue.product=navigator.product||"",ue.navigator=navigator||null,navigator.product){case"ReactNative":ue.userAgent=Le+" react-native",ue.isReactNative=!0;break;default:ue.userAgent=Le+" js",ue.isReactNative=!1;break}var Yr=function(){return ue.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var st=function(){function o(i){var e=i===void 0?{}:i,s=e.IdToken,a=e.RefreshToken,f=e.AccessToken,u=e.ClockDrift;if(f==null||s==null)throw new Error("Id token and Access Token must be present.");this.idToken=s,this.refreshToken=a,this.accessToken=f,this.clockDrift=u===void 0?this.calculateClockDrift():u}var n=o.prototype;return n.getIdToken=function(){return this.idToken},n.getRefreshToken=function(){return this.refreshToken},n.getAccessToken=function(){return this.accessToken},n.getClockDrift=function(){return this.clockDrift},n.calculateClockDrift=function(){var e=Math.floor(new Date/1e3),s=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return e-s},n.isValid=function(){var e=Math.floor(new Date/1e3),s=e-this.clockDrift;return s<this.accessToken.getExpiration()&&s<this.idToken.getExpiration()},o}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Gr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Wr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ot=function(){function o(){}var n=o.prototype;return n.getNowString=function(){var e=new Date,s=Wr[e.getUTCDay()],a=Gr[e.getUTCMonth()],f=e.getUTCDate(),u=e.getUTCHours();u<10&&(u="0"+u);var l=e.getUTCMinutes();l<10&&(l="0"+l);var g=e.getUTCSeconds();g<10&&(g="0"+g);var p=e.getUTCFullYear(),v=s+" "+a+" "+f+" "+u+":"+l+":"+g+" UTC "+p;return v},o}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Jr=function(){function o(i){var e=i===void 0?{}:i,s=e.Name,a=e.Value;this.Name=s||"",this.Value=a||""}var n=o.prototype;return n.getValue=function(){return this.Value},n.setValue=function(e){return this.Value=e,this},n.getName=function(){return this.Name},n.setName=function(e){return this.Name=e,this},n.toString=function(){return JSON.stringify(this)},n.toJSON=function(){return{Name:this.Name,Value:this.Value}},o}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var he={},Zr=function(){function o(){}return o.setItem=function(i,e){return he[i]=e,he[i]},o.getItem=function(i){return Object.prototype.hasOwnProperty.call(he,i)?he[i]:void 0},o.removeItem=function(i){return delete he[i]},o.clear=function(){return he={},he},o}(),pt=function(){function o(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=Zr}}var n=o.prototype;return n.getStorage=function(){return this.storageWindow},o}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var $r=typeof navigator<"u",at=$r?ue.isReactNative?"react-native":navigator.userAgent:"nodejs",ut=function(){function o(i){if(i==null||i.Username==null||i.Pool==null)throw new Error("Username and Pool information are required.");this.username=i.Username||"",this.pool=i.Pool,this.Session=null,this.client=i.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=i.Storage||new pt().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var n=o.prototype;return n.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},n.getSignInUserSession=function(){return this.signInUserSession},n.getUsername=function(){return this.username},n.getAuthenticationFlowType=function(){return this.authenticationFlowType},n.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},n.initiateAuth=function(e,s){var a=this,f=e.getAuthParameters();f.USERNAME=this.username;var u=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),l={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:f,ClientMetadata:u};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",l,function(g,p){if(g)return s.onFailure(g);var v=p.ChallengeName,w=p.ChallengeParameters;return v==="CUSTOM_CHALLENGE"?(a.Session=p.Session,s.customChallenge(w)):(a.signInUserSession=a.getCognitoUserSession(p.AuthenticationResult),a.cacheTokens(),s.onSuccess(a.signInUserSession))})},n.authenticateUser=function(e,s){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(e,s):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(e,s):s.onFailure(new Error("Authentication flow type is invalid."))},n.authenticateUserDefaultAuth=function(e,s){var a=this,f=new le(this.pool.getUserPoolName()),u=new ot,l,g,p={};this.deviceKey!=null&&(p.DEVICE_KEY=this.deviceKey),p.USERNAME=this.username,f.getLargeAValue(function(v,w){v&&s.onFailure(v),p.SRP_A=w.toString(16),a.authenticationFlowType==="CUSTOM_AUTH"&&(p.CHALLENGE_NAME="SRP_A");var E=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),I={AuthFlow:a.authenticationFlowType,ClientId:a.pool.getClientId(),AuthParameters:p,ClientMetadata:E};a.getUserContextData(a.username)&&(I.UserContextData=a.getUserContextData(a.username)),a.client.request("InitiateAuth",I,function(x,b){if(x)return s.onFailure(x);var B=b.ChallengeParameters;a.username=B.USER_ID_FOR_SRP,a.userDataKey=a.keyPrefix+"."+a.username+".userData",l=new T(B.SRP_B,16),g=new T(B.SALT,16),a.getCachedDeviceKeyAndPassword(),f.getPasswordAuthenticationKey(a.username,e.getPassword(),l,g,function(j,se){j&&s.onFailure(j);var G=u.getNowString(),re=K.Buffer.concat([K.Buffer.from(a.pool.getUserPoolName(),"utf8"),K.Buffer.from(a.username,"utf8"),K.Buffer.from(B.SECRET_BLOCK,"base64"),K.Buffer.from(G,"utf8")]),ne=new de.Sha256(se);ne.update(re);var oe=ne.digestSync(),P=K.Buffer.from(oe).toString("base64"),H={};H.USERNAME=a.username,H.PASSWORD_CLAIM_SECRET_BLOCK=B.SECRET_BLOCK,H.TIMESTAMP=G,H.PASSWORD_CLAIM_SIGNATURE=P,a.deviceKey!=null&&(H.DEVICE_KEY=a.deviceKey);var y=function C(_,D){return a.client.request("RespondToAuthChallenge",_,function(U,F){return U&&U.code==="ResourceNotFoundException"&&U.message.toLowerCase().indexOf("device")!==-1?(H.DEVICE_KEY=null,a.deviceKey=null,a.randomPassword=null,a.deviceGroupKey=null,a.clearCachedDeviceKeyAndPassword(),C(_,D)):D(U,F)})},A={ChallengeName:"PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:H,Session:b.Session,ClientMetadata:E};a.getUserContextData()&&(A.UserContextData=a.getUserContextData()),y(A,function(C,_){return C?s.onFailure(C):a.authenticateUserInternal(_,f,s)})})})})},n.authenticateUserPlainUsernamePassword=function(e,s){var a=this,f={};if(f.USERNAME=this.username,f.PASSWORD=e.getPassword(),!f.PASSWORD){s.onFailure(new Error("PASSWORD parameter is required"));return}var u=new le(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(f.DEVICE_KEY=this.deviceKey);var l=Object.keys(e.getValidationData()).length!==0?e.getValidationData():e.getClientMetadata(),g={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:f,ClientMetadata:l};this.getUserContextData(this.username)&&(g.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",g,function(p,v){return p?s.onFailure(p):a.authenticateUserInternal(v,u,s)})},n.authenticateUserInternal=function(e,s,a){var f=this,u=e.ChallengeName,l=e.ChallengeParameters;if(u==="SMS_MFA")return this.Session=e.Session,a.mfaRequired(u,l);if(u==="SELECT_MFA_TYPE")return this.Session=e.Session,a.selectMFAType(u,l);if(u==="MFA_SETUP")return this.Session=e.Session,a.mfaSetup(u,l);if(u==="SOFTWARE_TOKEN_MFA")return this.Session=e.Session,a.totpRequired(u,l);if(u==="CUSTOM_CHALLENGE")return this.Session=e.Session,a.customChallenge(l);if(u==="NEW_PASSWORD_REQUIRED"){this.Session=e.Session;var g=null,p=null,v=[],w=s.getNewPasswordRequiredChallengeUserAttributePrefix();if(l&&(g=JSON.parse(e.ChallengeParameters.userAttributes),p=JSON.parse(e.ChallengeParameters.requiredAttributes)),p)for(var E=0;E<p.length;E++)v[E]=p[E].substr(w.length);return a.newPasswordRequired(g,v)}if(u==="DEVICE_SRP_AUTH"){this.Session=e.Session,this.getDeviceResponse(a);return}this.signInUserSession=this.getCognitoUserSession(e.AuthenticationResult),this.challengeName=u,this.cacheTokens();var I=e.AuthenticationResult.NewDeviceMetadata;if(I==null)return a.onSuccess(this.signInUserSession);s.generateHashDevice(e.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,e.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(x){if(x)return a.onFailure(x);var b={Salt:K.Buffer.from(s.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:K.Buffer.from(s.getVerifierDevices(),"hex").toString("base64")};f.verifierDevices=b.PasswordVerifier,f.deviceGroupKey=I.DeviceGroupKey,f.randomPassword=s.getRandomPassword(),f.client.request("ConfirmDevice",{DeviceKey:I.DeviceKey,AccessToken:f.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:b,DeviceName:at},function(B,j){return B?a.onFailure(B):(f.deviceKey=e.AuthenticationResult.NewDeviceMetadata.DeviceKey,f.cacheDeviceKeyAndPassword(),j.UserConfirmationNecessary===!0?a.onSuccess(f.signInUserSession,j.UserConfirmationNecessary):a.onSuccess(f.signInUserSession))})})},n.completeNewPasswordChallenge=function(e,s,a,f){var u=this;if(!e)return a.onFailure(new Error("New password is required."));var l=new le(this.pool.getUserPoolName()),g=l.getNewPasswordRequiredChallengeUserAttributePrefix(),p={};s&&Object.keys(s).forEach(function(w){p[g+w]=s[w]}),p.NEW_PASSWORD=e,p.USERNAME=this.username;var v={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:p,Session:this.Session,ClientMetadata:f};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",v,function(w,E){return w?a.onFailure(w):u.authenticateUserInternal(E,l,a)})},n.getDeviceResponse=function(e,s){var a=this,f=new le(this.deviceGroupKey),u=new ot,l={};l.USERNAME=this.username,l.DEVICE_KEY=this.deviceKey,f.getLargeAValue(function(g,p){g&&e.onFailure(g),l.SRP_A=p.toString(16);var v={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a.pool.getClientId(),ChallengeResponses:l,ClientMetadata:s,Session:a.Session};a.getUserContextData()&&(v.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",v,function(w,E){if(w)return e.onFailure(w);var I=E.ChallengeParameters,x=new T(I.SRP_B,16),b=new T(I.SALT,16);f.getPasswordAuthenticationKey(a.deviceKey,a.randomPassword,x,b,function(B,j){if(B)return e.onFailure(B);var se=u.getNowString(),G=K.Buffer.concat([K.Buffer.from(a.deviceGroupKey,"utf8"),K.Buffer.from(a.deviceKey,"utf8"),K.Buffer.from(I.SECRET_BLOCK,"base64"),K.Buffer.from(se,"utf8")]),re=new de.Sha256(j);re.update(G);var ne=re.digestSync(),oe=K.Buffer.from(ne).toString("base64"),P={};P.USERNAME=a.username,P.PASSWORD_CLAIM_SECRET_BLOCK=I.SECRET_BLOCK,P.TIMESTAMP=se,P.PASSWORD_CLAIM_SIGNATURE=oe,P.DEVICE_KEY=a.deviceKey;var H={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:P,Session:E.Session};a.getUserContextData()&&(H.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",H,function(y,A){return y?e.onFailure(y):(a.signInUserSession=a.getCognitoUserSession(A.AuthenticationResult),a.cacheTokens(),e.onSuccess(a.signInUserSession))})})})})},n.confirmRegistration=function(e,s,a,f){var u={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:s,ClientMetadata:f};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",u,function(l){return l?a(l,null):a(null,"SUCCESS")})},n.sendCustomChallengeAnswer=function(e,s,a){var f=this,u={};u.USERNAME=this.username,u.ANSWER=e;var l=new le(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(u.DEVICE_KEY=this.deviceKey);var g={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(g.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",g,function(p,v){return p?s.onFailure(p):f.authenticateUserInternal(v,l,s)})},n.sendMFACode=function(e,s,a,f){var u=this,l={};l.USERNAME=this.username,l.SMS_MFA_CODE=e;var g=a||"SMS_MFA";g==="SOFTWARE_TOKEN_MFA"&&(l.SOFTWARE_TOKEN_MFA_CODE=e),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var p={ChallengeName:g,ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:f};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,w){if(v)return s.onFailure(v);var E=w.ChallengeName;if(E==="DEVICE_SRP_AUTH"){u.getDeviceResponse(s);return}if(u.signInUserSession=u.getCognitoUserSession(w.AuthenticationResult),u.cacheTokens(),w.AuthenticationResult.NewDeviceMetadata==null)return s.onSuccess(u.signInUserSession);var I=new le(u.pool.getUserPoolName());I.generateHashDevice(w.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,w.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(x){if(x)return s.onFailure(x);var b={Salt:K.Buffer.from(I.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:K.Buffer.from(I.getVerifierDevices(),"hex").toString("base64")};u.verifierDevices=b.PasswordVerifier,u.deviceGroupKey=w.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,u.randomPassword=I.getRandomPassword(),u.client.request("ConfirmDevice",{DeviceKey:w.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:u.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:b,DeviceName:at},function(B,j){return B?s.onFailure(B):(u.deviceKey=w.AuthenticationResult.NewDeviceMetadata.DeviceKey,u.cacheDeviceKeyAndPassword(),j.UserConfirmationNecessary===!0?s.onSuccess(u.signInUserSession,j.UserConfirmationNecessary):s.onSuccess(u.signInUserSession))})})})},n.changePassword=function(e,s,a,f){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return a(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:f},function(u){return u?a(u,null):a(null,"SUCCESS")})},n.enableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var s=[],a={DeliveryMedium:"SMS",AttributeName:"phone_number"};s.push(a),this.client.request("SetUserSettings",{MFAOptions:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?e(f,null):e(null,"SUCCESS")})},n.setUserMfaPreference=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?a(f,null):a(null,"SUCCESS")})},n.disableMFA=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);var s=[];this.client.request("SetUserSettings",{MFAOptions:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?e(a,null):e(null,"SUCCESS")})},n.deleteUser=function(e,s){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:s},function(f){return f?e(f,null):(a.clearCachedUser(),e(null,"SUCCESS"))})},n.updateAttributes=function(e,s,a){var f=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return s(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:a},function(u,l){return u?s(u,null):f.getUserData(function(){return s(null,"SUCCESS",l)},{bypassCache:!0})})},n.getUserAttributes=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s,a){if(s)return e(s,null);for(var f=[],u=0;u<a.UserAttributes.length;u++){var l={Name:a.UserAttributes[u].Name,Value:a.UserAttributes[u].Value},g=new Jr(l);f.push(g)}return e(null,f)})},n.getMFAOptions=function(e){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return e(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(s,a){return s?e(s,null):e(null,a.MFAOptions)})},n.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},n.refreshSessionIfPossible=function(e){var s=this;return e===void 0&&(e={}),new Promise(function(a){var f=s.signInUserSession.getRefreshToken();f&&f.getToken()?s.refreshSession(f,a,e.clientMetadata):a()})},n.getUserData=function(e,s){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),e(new Error("User is not authenticated"),null);var f=this.getUserDataFromCache();if(!f){this.fetchUserData().then(function(u){e(null,u)}).catch(e);return}if(this.isFetchUserDataAndTokenRequired(s)){this.fetchUserData().then(function(u){return a.refreshSessionIfPossible(s).then(function(){return u})}).then(function(u){return e(null,u)}).catch(e);return}try{e(null,JSON.parse(f));return}catch(u){this.clearCachedUserData(),e(u,null);return}},n.getUserDataFromCache=function(){var e=this.storage.getItem(this.userDataKey);return e},n.isFetchUserDataAndTokenRequired=function(e){var s=e||{},a=s.bypassCache,f=a===void 0?!1:a;return f},n.fetchUserData=function(){var e=this;return this.createGetUserRequest().then(function(s){return e.cacheUserData(s),s})},n.deleteAttributes=function(e,s){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return s(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?s(f,null):a.getUserData(function(){return s(null,"SUCCESS")},{bypassCache:!0})})},n.resendConfirmationCode=function(e,s){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:s};this.client.request("ResendConfirmationCode",a,function(f,u){return f?e(f,null):e(null,u)})},n.getSession=function(e,s){if(s===void 0&&(s={}),this.username==null)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var a="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,f=a+".idToken",u=a+".accessToken",l=a+".refreshToken",g=a+".clockDrift";if(this.storage.getItem(f)){var p=new nt({IdToken:this.storage.getItem(f)}),v=new rt({AccessToken:this.storage.getItem(u)}),w=new it({RefreshToken:this.storage.getItem(l)}),E=parseInt(this.storage.getItem(g),0)||0,I={IdToken:p,AccessToken:v,RefreshToken:w,ClockDrift:E},x=new st(I);if(x.isValid())return this.signInUserSession=x,e(null,this.signInUserSession);if(!w.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(w,e,s.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},n.refreshSession=function(e,s,a){var f=this,u=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(s):s,l={};l.REFRESH_TOKEN=e.getToken();var g="CognitoIdentityServiceProvider."+this.pool.getClientId(),p=g+".LastAuthUser";if(this.storage.getItem(p)){this.username=this.storage.getItem(p);var v=g+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(v),l.DEVICE_KEY=this.deviceKey}var w={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:l,ClientMetadata:a};this.getUserContextData()&&(w.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",w,function(E,I){if(E)return E.code==="NotAuthorizedException"&&f.clearCachedUser(),u(E,null);if(I){var x=I.AuthenticationResult;return Object.prototype.hasOwnProperty.call(x,"RefreshToken")||(x.RefreshToken=e.getToken()),f.signInUserSession=f.getCognitoUserSession(x),f.cacheTokens(),u(null,f.signInUserSession)}})},n.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=e+"."+this.username+".idToken",a=e+"."+this.username+".accessToken",f=e+"."+this.username+".refreshToken",u=e+"."+this.username+".clockDrift",l=e+".LastAuthUser";this.storage.setItem(s,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(f,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(u,""+this.signInUserSession.getClockDrift()),this.storage.setItem(l,this.username)},n.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},n.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},n.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},n.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=e+".deviceKey",a=e+".randomPasswordKey",f=e+".deviceGroupKey";this.storage.setItem(s,this.deviceKey),this.storage.setItem(a,this.randomPassword),this.storage.setItem(f,this.deviceGroupKey)},n.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=e+".deviceKey",a=e+".randomPasswordKey",f=e+".deviceGroupKey";this.storage.getItem(s)&&(this.deviceKey=this.storage.getItem(s),this.randomPassword=this.storage.getItem(a),this.deviceGroupKey=this.storage.getItem(f))},n.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,s=e+".deviceKey",a=e+".randomPasswordKey",f=e+".deviceGroupKey";this.storage.removeItem(s),this.storage.removeItem(a),this.storage.removeItem(f)},n.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),s=e+"."+this.username+".idToken",a=e+"."+this.username+".accessToken",f=e+"."+this.username+".refreshToken",u=e+".LastAuthUser",l=e+"."+this.username+".clockDrift";this.storage.removeItem(s),this.storage.removeItem(a),this.storage.removeItem(f),this.storage.removeItem(u),this.storage.removeItem(l)},n.getCognitoUserSession=function(e){var s=new nt(e),a=new rt(e),f=new it(e),u={IdToken:s,AccessToken:a,RefreshToken:f};return new st(u)},n.forgotPassword=function(e,s){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:s};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",a,function(f,u){return f?e.onFailure(f):typeof e.inputVerificationCode=="function"?e.inputVerificationCode(u):e.onSuccess(u)})},n.confirmPassword=function(e,s,a,f){var u={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:s,ClientMetadata:f};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",u,function(l){return l?a.onFailure(l):a.onSuccess("SUCCESS")})},n.getAttributeVerificationCode=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(f,u){return f?s.onFailure(f):typeof s.inputVerificationCode=="function"?s.inputVerificationCode(u):s.onSuccess("SUCCESS")})},n.verifyAttribute=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:s,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(f){return f?a.onFailure(f):a.onSuccess("SUCCESS")})},n.getDevice=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(s,a){return s?e.onFailure(s):e.onSuccess(a)})},n.forgetSpecificDevice=function(e,s){if(this.signInUserSession==null||!this.signInUserSession.isValid())return s.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(a){return a?s.onFailure(a):s.onSuccess("SUCCESS")})},n.forgetDevice=function(e){var s=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:e.onFailure,onSuccess:function(f){return s.deviceKey=null,s.deviceGroupKey=null,s.randomPassword=null,s.clearCachedDeviceKeyAndPassword(),e.onSuccess(f)}})},n.setDeviceStatusRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(s){return s?e.onFailure(s):e.onSuccess("SUCCESS")})},n.setDeviceStatusNotRemembered=function(e){if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(s){return s?e.onFailure(s):e.onSuccess("SUCCESS")})},n.listDevices=function(e,s,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));var f={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};s&&(f.PaginationToken=s),this.client.request("ListDevices",f,function(u,l){return u?a.onFailure(u):a.onSuccess(l)})},n.globalSignOut=function(e){var s=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return e.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?e.onFailure(a):(s.clearCachedUser(),e.onSuccess("SUCCESS"))})},n.signOut=function(e){var s=this;if(!e||typeof e!="function"){this.cleanClientData();return}this.getSession(function(a,f){if(a)return e(a);s.revokeTokens(function(u){s.cleanClientData(),e(u)})})},n.revokeTokens=function(e){if(e===void 0&&(e=function(){}),typeof e!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var s=new Error("User is not authenticated");return e(s)}if(!this.signInUserSession.getAccessToken()){var a=new Error("No Access token available");return e(a)}var f=this.signInUserSession.getRefreshToken().getToken(),u=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(u)&&f)return this.revokeToken({token:f,callback:e});e()},n.isSessionRevocable=function(e){if(e&&typeof e.decodePayload=="function")try{var s=e.decodePayload(),a=s.origin_jti;return!!a}catch{}return!1},n.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},n.revokeToken=function(e){var s=e.token,a=e.callback;this.client.requestWithRetry("RevokeToken",{Token:s,ClientId:this.pool.getClientId()},function(f){if(f)return a(f);a()})},n.sendMFASelectionAnswer=function(e,s){var a=this,f={};f.USERNAME=this.username,f.ANSWER=e;var u={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:f,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(u.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",u,function(l,g){if(l)return s.onFailure(l);if(a.Session=g.Session,e==="SMS_MFA")return s.mfaRequired(g.ChallengeName,g.ChallengeParameters);if(e==="SOFTWARE_TOKEN_MFA")return s.totpRequired(g.ChallengeName,g.ChallengeParameters)})},n.getUserContextData=function(){var e=this.pool;return e.getUserContextData(this.username)},n.associateSoftwareToken=function(e){var s=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a,f){return a?e.onFailure(a):e.associateSecretCode(f.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(a,f){return a?e.onFailure(a):(s.Session=f.Session,e.associateSecretCode(f.SecretCode))})},n.verifySoftwareToken=function(e,s,a){var f=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:s},function(u,l){return u?a.onFailure(u):a.onSuccess(l)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:s},function(u,l){if(u)return a.onFailure(u);f.Session=l.Session;var g={};g.USERNAME=f.username;var p={ChallengeName:"MFA_SETUP",ClientId:f.pool.getClientId(),ChallengeResponses:g,Session:f.Session};f.getUserContextData()&&(p.UserContextData=f.getUserContextData()),f.client.request("RespondToAuthChallenge",p,function(v,w){return v?a.onFailure(v):(f.signInUserSession=f.getCognitoUserSession(w.AuthenticationResult),f.cacheTokens(),a.onSuccess(f.signInUserSession))})})},o}();function zr(o,n){return n=n||{},new Promise(function(i,e){var s=new XMLHttpRequest,a=[],f=[],u={},l=function(){return{ok:(s.status/100|0)==2,statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:l,headers:{keys:function(){return a},entries:function(){return f},get:function(p){return u[p.toLowerCase()]},has:function(p){return p.toLowerCase()in u}}}};for(var g in s.open(n.method||"get",o,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(p,v,w){a.push(v=v.toLowerCase()),f.push([v,w]),u[v]=u[v]?u[v]+","+w:w}),i(l())},s.onerror=e,s.withCredentials=n.credentials=="include",n.headers)s.setRequestHeader(g,n.headers[g]);s.send(n.body||null)})}const Xr=Object.freeze(Object.defineProperty({__proto__:null,default:zr},Symbol.toStringTag,{value:"Module"})),ft=ct(Xr);self.fetch||(self.fetch=ft.default||ft);function vt(){}vt.prototype.userAgent=Yr();function Qr(o,n){o.prototype=Object.create(n.prototype),o.prototype.constructor=o,ve(o,n)}function Ve(o){var n=typeof Map=="function"?new Map:void 0;return Ve=function(e){if(e===null||!tn(e))return e;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(e))return n.get(e);n.set(e,s)}function s(){return Ce(e,arguments,qe(this).constructor)}return s.prototype=Object.create(e.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),ve(s,e)},Ve(o)}function Ce(o,n,i){return en()?Ce=Reflect.construct.bind():Ce=function(s,a,f){var u=[null];u.push.apply(u,a);var l=Function.bind.apply(s,u),g=new l;return f&&ve(g,f.prototype),g},Ce.apply(null,arguments)}function en(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tn(o){return Function.toString.call(o).indexOf("[native code]")!==-1}function ve(o,n){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,s){return e.__proto__=s,e},ve(o,n)}function qe(o){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},qe(o)}var rn=function(o){Qr(n,o);function n(i,e,s,a){var f;return f=o.call(this,i)||this,f.code=e,f.name=s,f.statusCode=a,f}return n}(Ve(Error)),nn=function(){function o(i,e,s){this.endpoint=e||"https://cognito-idp."+i+".amazonaws.com/";var a=s||{},f=a.credentials;this.fetchOptions=f?{credentials:f}:{}}var n=o.prototype;return n.promisifyRequest=function(e,s){var a=this;return new Promise(function(f,u){a.request(e,s,function(l,g){l?u(new rn(l.message,l.code,l.name,l.statusCode)):f(g)})})},n.requestWithRetry=function(e,s,a){var f=this,u=5*1e3;un(function(l){return new Promise(function(g,p){f.request(e,l,function(v,w){v?p(v):g(w)})})},[s],u).then(function(l){return a(null,l)}).catch(function(l){return a(l)})},n.request=function(e,s,a){var f={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":vt.prototype.userAgent,"Cache-Control":"no-store"},u=Object.assign({},this.fetchOptions,{headers:f,method:"POST",mode:"cors",body:JSON.stringify(s)}),l;fetch(this.endpoint,u).then(function(g){return l=g,g},function(g){throw g instanceof TypeError?new Error("Network error"):g}).then(function(g){return g.json().catch(function(){return{}})}).then(function(g){if(l.ok)return a(null,g);var p=(g.__type||g.code).split("#").pop(),v=new Error(g.message||g.Message||null);return v.name=p,v.code=p,a(v)}).catch(function(g){if(l&&l.headers&&l.headers.get("x-amzn-errortype"))try{var p=l.headers.get("x-amzn-errortype").split(":")[0],v=new Error(l.status?l.status.toString():null);return v.code=p,v.name=p,v.statusCode=l.status,a(v)}catch{return a(g)}else g instanceof Error&&g.message==="Network error"&&(g.code="NetworkError");return a(g)})},o}(),Ae={debug:function(){}},sn=function(n){var i="nonRetryable";return n&&n[i]};function yt(o,n,i,e){if(e===void 0&&(e=1),typeof o!="function")throw Error("functionToRetry must be a function");return Ae.debug(o.name+" attempt #"+e+" with args: "+JSON.stringify(n)),o.apply(void 0,n).catch(function(s){if(Ae.debug("error on "+o.name,s),sn(s))throw Ae.debug(o.name+" non retryable error",s),s;var a=i(e,n,s);if(Ae.debug(o.name+" retrying in "+a+" ms"),a!==!1)return new Promise(function(f){return setTimeout(f,a)}).then(function(){return yt(o,n,i,e+1)});throw s})}function on(o){var n=100,i=100;return function(e){var s=Math.pow(2,e)*n+i*Math.random();return s>o?!1:s}}var an=5*60*1e3;function un(o,n,i){return i===void 0&&(i=an),yt(o,n,on(i))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var fn=55,cn=function(){function o(i,e){var s=i||{},a=s.UserPoolId,f=s.ClientId,u=s.endpoint,l=s.fetchOptions,g=s.AdvancedSecurityDataCollectionFlag;if(!a||!f)throw new Error("Both UserPoolId and ClientId are required.");if(a.length>fn||!/^[\w-]+_[0-9a-zA-Z]+$/.test(a))throw new Error("Invalid UserPoolId format.");var p=a.split("_")[0];this.userPoolId=a,this.clientId=f,this.client=new nn(p,u,l),this.advancedSecurityDataCollectionFlag=g!==!1,this.storage=i.Storage||new pt().getStorage(),e&&(this.wrapRefreshSessionCallback=e)}var n=o.prototype;return n.getUserPoolId=function(){return this.userPoolId},n.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},n.getClientId=function(){return this.clientId},n.signUp=function(e,s,a,f,u,l){var g=this,p={ClientId:this.clientId,Username:e,Password:s,UserAttributes:a,ValidationData:f,ClientMetadata:l};this.getUserContextData(e)&&(p.UserContextData=this.getUserContextData(e)),this.client.request("SignUp",p,function(v,w){if(v)return u(v,null);var E={Username:e,Pool:g,Storage:g.storage},I={user:new ut(E),userConfirmed:w.UserConfirmed,userSub:w.UserSub,codeDeliveryDetails:w.CodeDeliveryDetails};return u(null,I)})},n.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",s=this.storage.getItem(e);if(s){var a={Username:s,Pool:this,Storage:this.storage};return new ut(a)}return null},n.getUserContextData=function(e){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var s=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var a=s.getData(e,this.userPoolId,this.clientId);if(a){var f={EncodedData:a};return f}}return{}}},o}(),ht={},hn={get exports(){return ht},set exports(o){ht=o}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(o,n){(function(i){var e;if(o.exports=i(),e=!0,!e){var s=window.Cookies,a=window.Cookies=i();a.noConflict=function(){return window.Cookies=s,a}}})(function(){function i(){for(var a=0,f={};a<arguments.length;a++){var u=arguments[a];for(var l in u)f[l]=u[l]}return f}function e(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function s(a){function f(){}function u(g,p,v){if(!(typeof document>"u")){v=i({path:"/"},f.defaults,v),typeof v.expires=="number"&&(v.expires=new Date(new Date*1+v.expires*864e5)),v.expires=v.expires?v.expires.toUTCString():"";try{var w=JSON.stringify(p);/^[\{\[]/.test(w)&&(p=w)}catch{}p=a.write?a.write(p,g):encodeURIComponent(String(p)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),g=encodeURIComponent(String(g)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var E="";for(var I in v)v[I]&&(E+="; "+I,v[I]!==!0&&(E+="="+v[I].split(";")[0]));return document.cookie=g+"="+p+E}}function l(g,p){if(!(typeof document>"u")){for(var v={},w=document.cookie?document.cookie.split("; "):[],E=0;E<w.length;E++){var I=w[E].split("="),x=I.slice(1).join("=");!p&&x.charAt(0)==='"'&&(x=x.slice(1,-1));try{var b=e(I[0]);if(x=(a.read||a)(x,b)||e(x),p)try{x=JSON.parse(x)}catch{}if(v[b]=x,g===b)break}catch{}}return g?v[g]:v}}return f.set=u,f.get=function(g){return l(g,!1)},f.getJSON=function(g){return l(g,!0)},f.remove=function(g,p){u(g,"",i(p,{expires:-1}))},f.defaults={},f.withConverter=s,f}return s(function(){})})})(hn);const ln={UserPoolId:"eu-north-1_aUSrtR5o1",ClientId:"m1ir12etmoe7p3pl44j4djc46"};export{cn as C,ut as a,Jr as b,ln as p};
